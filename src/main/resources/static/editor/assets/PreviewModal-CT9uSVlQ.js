import{j as t}from"./index-aIOkfuJM.js";import{r as h}from"./tiptap-vendor-C2mi-KzI.js";import{X as N}from"./icons-vendor-8W8gD9qm.js";import"./react-vendor-DeqkGhWy.js";import"./utils-vendor-JBSp_YRO.js";const j=[{name:"Noto Sans KR",family:"'Noto Sans KR', sans-serif"},{name:"Nanum Gothic",family:"'Nanum Gothic', sans-serif"},{name:"Black Han Sans",family:"'Black Han Sans', sans-serif"},{name:"Roboto",family:"'Roboto', sans-serif"},{name:"Montserrat",family:"'Montserrat', sans-serif"},{name:"Playfair Display",family:"'Playfair Display', serif"},{name:"Source Code Pro",family:"'Source Code Pro', monospace"}],b=i=>{const r=`google-font-${i.replace(/\s/g,"-")}`;if(document.getElementById(r))return;const a=document.createElement("link");a.id=r,a.href=`https://fonts.googleapis.com/css2?family=${i.replace(/\s/g,"+")}:wght@400;700&display=swap`,a.rel="stylesheet",document.head.appendChild(a)},M=({isOpen:i,onClose:r,editorContent:a,styles:l})=>{const p=h.useRef(null);if(h.useEffect(()=>{if(i&&p.current){if(l&&l.fontFamily){const e=j.find(s=>s.family===l.fontFamily);e&&(console.log("Loading Google Font for preview modal:",e.name),b(e.name))}p.current.querySelectorAll('[data-type="photo-grid"]').forEach(e=>{try{const s=JSON.parse(e.getAttribute("data-layout")||"[]"),f=JSON.parse(e.getAttribute("data-items")||"[]");if(f.length>0){const x=Math.max(...s.map(o=>o.x+o.w),4),g=Math.max(...s.map(o=>o.y+o.h),4);e.style.position="relative",e.style.width=`${x*50}px`,e.style.height=`${g*50}px`,e.style.margin="1rem auto",e.innerHTML="",f.forEach((o,v)=>{const c=s.find(w=>w.i===o.id)||{x:0,y:0,w:2,h:2},m=document.createElement("div");m.className="preview-grid-item",m.style.cssText=`
                                position: absolute;
                                left: ${c.x*50}px;
                                top: ${c.y*50}px;
                                width: ${c.w*50}px;
                                height: ${c.h*50}px;
                                border-radius: 8px;
                                overflow: hidden;
                                box-shadow: 0 1px 3px rgba(0, 0, 0, 0.12);
                            `;const d=document.createElement("img");d.src=o.src,d.alt=`Grid image ${v+1}`,d.style.cssText="width: 100%; height: 100%; object-fit: cover;",m.appendChild(d),e.appendChild(m)})}}catch(s){console.warn("Error rendering photo grid in preview:",s)}})}},[i,a]),!i)return null;const y=n=>{n.target===n.currentTarget&&r()},u=n=>{n.stopPropagation()};return t.jsx("div",{className:"preview-modal-overlay",onClick:y,children:t.jsxs("div",{className:"preview-modal-content",onClick:u,children:[t.jsxs("div",{className:"preview-modal-header",children:[t.jsx("h2",{children:"미리보기"}),t.jsx("button",{className:"preview-close-button",onClick:r,children:t.jsx(N,{size:20})})]}),t.jsx("div",{className:"preview-modal-body",style:l,children:t.jsx("div",{ref:p,className:"preview-content",dangerouslySetInnerHTML:{__html:a}})}),t.jsx("div",{className:"preview-modal-footer",onClick:r,children:t.jsx("p",{children:"클릭하여 닫기"})})]})})};export{M as default};
