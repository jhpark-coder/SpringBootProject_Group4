import{j as o}from"./index-XlCpr-Ut.js";import{r as v}from"./tiptap-vendor-C2mi-KzI.js";import{X as N}from"./icons-vendor-8W8gD9qm.js";import"./react-vendor-DeqkGhWy.js";import"./utils-vendor-JBSp_YRO.js";const S=[{name:"Noto Sans KR",family:"'Noto Sans KR', sans-serif"},{name:"Nanum Gothic",family:"'Nanum Gothic', sans-serif"},{name:"Black Han Sans",family:"'Black Han Sans', sans-serif"},{name:"Roboto",family:"'Roboto', sans-serif"},{name:"Montserrat",family:"'Montserrat', sans-serif"},{name:"Playfair Display",family:"'Playfair Display', serif"},{name:"Source Code Pro",family:"'Source Code Pro', monospace"}],C=l=>{const c=`google-font-${l.replace(/\s/g,"-")}`;if(document.getElementById(c))return;const i=document.createElement("link");i.id=c,i.href=`https://fonts.googleapis.com/css2?family=${l.replace(/\s/g,"+")}:wght@400;700&display=swap`,i.rel="stylesheet",document.head.appendChild(i)},R=({isOpen:l,onClose:c,editorContent:i,styles:h})=>{const f=v.useRef(null);if(v.useEffect(()=>{if(l&&f.current){if(h&&h.fontFamily){const e=S.find(r=>r.family===h.fontFamily);e&&(console.log("Loading Google Font for preview modal:",e.name),C(e.name))}f.current.querySelectorAll('[data-type="photo-grid"]').forEach(e=>{try{let r={};const g=e.getAttribute("data-layouts");if(g)try{r=JSON.parse(g)}catch(t){console.warn("Failed to parse saved layouts:",t)}const u=Array.from(e.querySelectorAll(".grid-item img")).map(t=>({src:t.getAttribute("src"),alt:t.getAttribute("alt")}));if(u.length>0){let t=[],y=4,x=4;r.lg&&r.lg.length>0?(t=r.lg,y=Math.max(...t.map(s=>s.x+s.w),4),x=Math.max(...t.map(s=>s.y+s.h),4)):(t=u.map((a,n)=>{const m=n%2*6,d=Math.floor(n/2);return{i:n.toString(),x:m,y:d,w:6,h:2}}),y=Math.max(...t.map(a=>a.x+a.w),4),x=Math.max(...t.map(a=>a.y+a.h),4)),e.style.position="relative",e.style.width=`${y*50}px`,e.style.height=`${x*50}px`,e.style.margin="1rem auto",e.innerHTML="",u.forEach((s,a)=>{const n=t.find(j=>j.i===a.toString())||{x:0,y:0,w:2,h:2},m=document.createElement("div");m.className="preview-grid-item",m.style.cssText=`
                                position: absolute;
                                left: ${n.x*50}px;
                                top: ${n.y*50}px;
                                width: ${n.w*50}px;
                                height: ${n.h*50}px;
                                border-radius: 8px;
                                overflow: hidden;
                                box-shadow: 0 1px 3px rgba(0, 0, 0, 0.12);
                            `;const d=document.createElement("img");d.src=s.src,d.alt=`Grid image ${a+1}`,d.style.cssText="width: 100%; height: 100%; object-fit: cover;",m.appendChild(d),e.appendChild(m)})}}catch(r){console.warn("Error rendering photo grid in preview:",r)}})}},[l,i]),!l)return null;const w=p=>{p.target===p.currentTarget&&c()},b=p=>{p.stopPropagation()};return o.jsx("div",{className:"preview-modal-overlay",onClick:w,children:o.jsxs("div",{className:"preview-modal-content",onClick:b,children:[o.jsxs("div",{className:"preview-modal-header",children:[o.jsx("h2",{children:"미리보기"}),o.jsx("button",{className:"preview-close-button",onClick:c,children:o.jsx(N,{size:20})})]}),o.jsx("div",{className:"preview-modal-body",style:h,children:o.jsx("div",{ref:f,className:"preview-content",dangerouslySetInnerHTML:{__html:i}})}),o.jsx("div",{className:"preview-modal-footer",onClick:c,children:o.jsx("p",{children:"클릭하여 닫기"})})]})})};export{R as default};
