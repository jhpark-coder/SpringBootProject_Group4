import{j as s}from"./index-DhXCz5Yu.js";import{r as i}from"./tiptap-vendor-C2mi-KzI.js";import"./react-vendor-DeqkGhWy.js";import"./icons-vendor-8W8gD9qm.js";import"./utils-vendor-JBSp_YRO.js";const u={아트워크:["포토그래피","일러스트레이션","스케치","코믹스"],그래픽디자인:["타이포그라피","앨범아트","로고","브랜딩","편집디자인"],캐릭터:["카툰","팬아트","2D 캐릭터","3D 모델링"],Java:["Spring/JPA","네트워크","알고리즘","코어 자바"],프론트엔드:["HTML/CSS","JavaScript","React/Vue","UI/UX"],Python:["웹 개발","데이터 분석","머신러닝","자동화"]},ie={아트워크:["#감성적인","#풍경","#인물","#동물","#흑백","#빈티지","#판타지","#SF","#일상","#수채화","#유화","#디지털페인팅","#펜드로잉","#컨셉아트","#캐리커처","#웹툰","#만화","#스토리보드","#배경아트","#게임원화"],그래픽디자인:["#미니멀리즘","#모던","#레트로","#캘리그라피","#산세리프","#세리프","#커버디자인","#음악","#아이덴티티","#기업브랜딩","#패키지디자인","#포스터","#리플렛","#북커버","#인포그래픽","#UX/UI","#아이콘","#픽토그램","#광고디자인","#시각디자인"],캐릭터:["#귀여운","#실사체","#SD캐릭터","#애니메이션","#게임캐릭터","#웹툰캐릭터","#오리지널캐릭터","#몬스터","#메카닉","#이모티콘","#버츄얼유튜버","#ZBrush","#Blender","#Maya","#Live2D","#스파인","#시트지","#캐릭터시트","#일러스트","#컨셉디자인"],Java:["#백엔드","#웹개발","#SpringBoot","#SpringSecurity","#JPA","#Hibernate","#QueryDSL","#객체지향","#디자인패턴","#멀티스레딩","#소켓프로그래밍","#TCP/IP","#HTTP","#REST-API","#자료구조","#코딩테스트","#JVM","#GC","#이펙티브자바","#테스트코드"],프론트엔드:["#웹퍼블리싱","#반응형웹","#CSS-in-JS","#SASS","#TypeScript","#ES6+","#상태관리","#Redux","#MobX","#Vuex","#Next_js","#Nuxt_js","#Webpack","#Babel","#웹소켓","#PWA","#웹접근성","#웹표준","#프로토타이핑","#Figma"],Python:["#Django","#Flask","#FastAPI","#Pandas","#NumPy","#Matplotlib","#Scikit-learn","#TensorFlow","#PyTorch","#Jupyter","#크롤링","#웹스크레이핑","#Selenium","#BeautifulSoup","#업무자동화","#RPA","#데이터시각화","#딥러닝","#자연어처리","#컴퓨터비전"]},le=["1일","3일","7일"],pe=({isOpen:S,onClose:k,onSave:L,initialSettings:l})=>{var _;const[c,y]=i.useState(l||{}),[n,T]=i.useState(""),[d,w]=i.useState(""),[v,b]=i.useState(""),[D,P]=i.useState(""),[j,C]=i.useState(""),[g,x]=i.useState(""),[A,R]=i.useState(""),[ne,G]=i.useState(""),[m,B]=i.useState([]),[F,O]=i.useState(""),[t,h]=i.useState({}),E=i.useRef(null);i.useEffect(()=>{var e;if(console.log("Received initialSettings:",l),S&&l){const a=Object.keys(u),r=Object.values(u).flat(),o=a.find(p=>{var f;return(f=l.tags)==null?void 0:f.includes(p)})||"",N=r.find(p=>{var f;return(f=l.tags)==null?void 0:f.includes(p)})||"";T(o);const ce=((e=l.tags)==null?void 0:e.filter(p=>!a.includes(p)&&!r.includes(p)).map(p=>p.startsWith("#")?p:`#${p}`))||[];B(ce);const W=o?[o]:[];N&&W.push(N),y({...l,tags:W}),w(l.saleType||""),b(l.salePrice||""),P(l.auctionDuration||""),C(l.startBidPrice||""),x(l.buyNowPrice||""),R(l.workDescription||""),G(l.buyout_price||"")}},[S,l]),i.useEffect(()=>{const e=Object.keys(u).find(a=>c.tags.includes(a));e&&T(e)},[c.tags]),i.useEffect(()=>{console.log("SettingsModal 초기화 - settings:",c),c.saleType&&w(c.saleType),c.salePrice&&b(c.salePrice),c.auctionDuration&&P(c.auctionDuration),c.startBidPrice&&C(c.startBidPrice),c.buyNowPrice&&x(c.buyNowPrice)},[c]);const H=()=>{var r;const e={};(r=c.title)!=null&&r.trim()||(e.title="프로젝트 제목은 필수입니다."),n||(e.primaryCategory="1차 카테고리를 선택해주세요.");const a=c.tags.some(o=>{var N;return n&&((N=u[n])==null?void 0:N.includes(o))});return a||(e.secondaryCategory="세부 카테고리를 선택해주세요."),a&&!d&&(e.saleType="판매 방식을 선택해주세요."),d==="sale"&&(!v||parseFloat(v)<=0)&&(e.salePrice="희망판매가를 입력해주세요."),d==="auction"&&(D||(e.auctionDuration="경매 기간을 선택해주세요."),(!j||parseFloat(j)<=0)&&(e.startBidPrice="시작입찰가를 입력해주세요."),(!g||parseFloat(g)<=0)&&(e.buyNowPrice="즉시입찰가를 입력해주세요."),j&&g&&parseFloat(g)<=parseFloat(j)&&(e.buyNowPrice="즉시입찰가는 시작입찰가보다 높아야 합니다.")),h(e),Object.keys(e).length===0},V=e=>{y(a=>({...a,title:e.target.value})),t.title&&h(a=>({...a,title:""}))},X=e=>{const a=e.target.files[0];if(a){const r=new FileReader;r.onloadend=()=>{y(o=>({...o,coverImage:r.result}))},r.readAsDataURL(a)}},K=e=>{T(e),y(a=>({...a,tags:[e]})),t.primaryCategory&&h(a=>({...a,primaryCategory:""}))},Q=e=>{const a=c.tags.find(r=>{var o;return n&&((o=u[n])==null?void 0:o.includes(r))});y(a===e?r=>({...r,tags:[n]}):r=>({...r,tags:[n,e]})),t.secondaryCategory&&h(r=>({...r,secondaryCategory:""}))},M=e=>{w(e),e==="sale"?(P(""),C(""),x("")):e==="auction"&&b(""),t.saleType&&h(a=>({...a,saleType:""}))},Z=e=>{const a=e.target.value;b(a),t.salePrice&&h(r=>({...r,salePrice:""}))},q=e=>{P(e),t.auctionDuration&&h(a=>({...a,auctionDuration:""}))},z=e=>{const a=e.target.value;C(a),a&&g&&parseFloat(a)>parseFloat(g)&&x(""),t.startBidPrice&&h(r=>({...r,startBidPrice:""})),t.buyNowPrice&&h(r=>({...r,buyNowPrice:""}))},Y=e=>{const a=e.target.value;x(a),t.buyNowPrice&&h(r=>({...r,buyNowPrice:""}))},ee=e=>{O(e.target.value)},se=e=>{e.key==="Enter"&&F.trim()!==""&&(e.preventDefault(),J(F.trim()),O(""))},J=e=>{const a=e.startsWith("#")?e:`#${e}`,r=Object.keys(u),o=Object.values(u).flat();m.length<5&&!m.includes(a)&&!r.includes(a)&&!o.includes(a)&&B([...m,a])},$=e=>{const a=Object.keys(u),r=Object.values(u).flat();!a.includes(e)&&!r.includes(e)&&B(m.filter(o=>o!==e))},ae=e=>{R(e.target.value)},te=()=>{if(H()){const e=[...c.tags,...m],a={...c,tags:e,primaryCategory:n,saleType:d,salePrice:d==="sale"?v:null,auctionDuration:d==="auction"?D:null,startBidPrice:d==="auction"?j:null,buyNowPrice:d==="auction"?g:null,workDescription:A};L(a),k()}},U=c.tags.some(e=>{var a;return n&&((a=u[n])==null?void 0:a.includes(e))}),I=e=>m.includes(e),re=e=>{I(e)?$(e):m.length<5&&J(e)};return S?s.jsx("div",{className:"modal-overlay",onClick:k,children:s.jsxs("div",{className:"settings-modal-content",onClick:e=>e.stopPropagation(),children:[s.jsx("div",{className:"settings-modal-header",children:s.jsx("h2",{children:"Settings"})}),s.jsx("div",{className:"modal-body",children:s.jsxs("div",{className:"settings-grid",children:[s.jsxs("div",{className:"left-column",children:[s.jsxs("div",{className:"form-group",children:[s.jsx("label",{children:"프로젝트 표지"}),s.jsxs("div",{className:"cover-image-container",children:[c.coverImage?s.jsxs("div",{className:"image-wrapper",onClick:()=>E.current.click(),children:[s.jsx("img",{src:c.coverImage,alt:"프로젝트 표지",className:"main-image"}),s.jsx("div",{className:"image-overlay",children:s.jsx("button",{className:"overlay-button",children:"이미지 변경"})})]}):s.jsxs("div",{className:"cover-image-placeholder",onClick:()=>E.current.click(),children:[s.jsx("span",{children:"+"}),s.jsx("p",{children:"클릭하여 표지 이미지 추가"})]}),s.jsx("input",{type:"file",ref:E,onChange:X,accept:"image/*",style:{display:"none"}})]})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{htmlFor:"work-description",children:"작품 설명"}),s.jsx("textarea",{id:"work-description",value:A,onChange:ae,placeholder:"작품에 대한 추가적인 설명을 자유롭게 작성해주세요. (예: 제작 과정, 사용된 툴, 작품의 의미 등)",className:"work-description-textarea"})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{children:"선택된 태그"}),s.jsx("div",{className:"selected-tags",children:m.map(e=>s.jsxs("div",{className:"tag-item",children:[e,s.jsx("button",{onClick:()=>$(e),className:"remove-tag-btn",children:"×"})]},e))})]})]}),s.jsxs("div",{className:"right-column",children:[s.jsxs("div",{className:"form-group",children:[s.jsx("label",{htmlFor:"project-title",children:"프로젝트 제목 (필수)"}),s.jsx("input",{type:"text",id:"project-title",value:c.title,onChange:V,placeholder:"프로젝트의 제목을 입력하세요",className:t.title?"error":""}),t.title&&s.jsx("span",{className:"error-message",children:t.title})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{children:"1차 카테고리"}),s.jsx("div",{className:"category-group primary-categories",children:Object.keys(u).map(e=>s.jsx("button",{className:`category-button ${n===e?"active":""}`,onClick:()=>K(e),children:e},e))}),t.primaryCategory&&s.jsx("span",{className:"error-message",children:t.primaryCategory}),n&&s.jsxs("div",{className:"form-group",children:[s.jsx("label",{children:"세부 카테고리"}),s.jsx("div",{className:"category-group secondary-categories",children:u[n].map(e=>s.jsx("button",{className:`category-button ${c.tags.includes(e)?"active":""}`,onClick:()=>Q(e),children:e},e))}),t.secondaryCategory&&s.jsx("span",{className:"error-message",children:t.secondaryCategory})]})]}),U&&s.jsxs("div",{className:"form-section",children:[s.jsx("h3",{className:"section-title",children:"판매 방식"}),s.jsxs("div",{className:"sale-type-group",children:[s.jsx("button",{className:`sale-type-button ${d==="sale"?"active":""}`,onClick:()=>M("sale"),children:"판매"}),s.jsx("button",{className:`sale-type-button ${d==="auction"?"active":""}`,onClick:()=>M("auction"),children:"경매"})]}),t.saleType&&s.jsx("span",{className:"error-message",children:t.saleType})]}),d==="sale"&&s.jsxs("div",{className:"price-input-section",children:[s.jsx("label",{htmlFor:"sale-price",children:"희망판매가 (원)"}),s.jsx("input",{type:"number",id:"sale-price",value:v,onChange:Z,placeholder:"희망판매가를 입력하세요",min:"0",className:t.salePrice?"error":""}),t.salePrice&&s.jsx("span",{className:"error-message",children:t.salePrice})]}),d==="auction"&&s.jsxs("div",{className:"auction-settings",children:[s.jsxs("div",{className:"auction-duration-section",children:[s.jsx("label",{children:"경매 기간"}),s.jsx("div",{className:"duration-group",children:le.map(e=>s.jsx("button",{className:`duration-button ${D===e?"active":""}`,onClick:()=>q(e),children:e},e))}),t.auctionDuration&&s.jsx("span",{className:"error-message",children:t.auctionDuration})]}),s.jsxs("div",{className:"price-input-section",children:[s.jsx("label",{htmlFor:"start-bid-price",children:"시작입찰가 (원)"}),s.jsx("input",{type:"number",id:"start-bid-price",value:j,onChange:z,placeholder:"시작입찰가를 입력하세요",min:"0",className:t.startBidPrice?"error":""}),t.startBidPrice&&s.jsx("span",{className:"error-message",children:t.startBidPrice})]}),s.jsxs("div",{className:"price-input-section",children:[s.jsx("label",{htmlFor:"buy-now-price",children:"즉시입찰가 (원)"}),s.jsx("input",{type:"number",id:"buy-now-price",value:g,onChange:Y,placeholder:"즉시입찰가는 시작입찰가보다 높아야 합니다.",min:"0",className:t.buyNowPrice?"error":""}),t.buyNowPrice&&s.jsx("span",{className:"error-message",children:t.buyNowPrice})]})]}),U&&s.jsxs("div",{className:"form-section",children:[s.jsx("h3",{className:"section-title",children:"태그"}),s.jsxs("div",{className:"tag-wrapper",children:[s.jsx("div",{className:"tag-input-container",children:s.jsx("input",{type:"text",value:F,onChange:ee,onKeyDown:se,placeholder:"태그를 입력하고 Enter (최대 5개)",className:"tag-input",disabled:m.length>=5})}),s.jsxs("div",{className:"recommended-tags-container",children:[s.jsx("h4",{className:"recommended-tags-title",children:"추천 태그"}),s.jsx("div",{className:"recommended-tags",children:(_=ie[n])==null?void 0:_.map(e=>s.jsx("button",{onClick:()=>re(e),className:`recommended-tag-btn ${I(e)?"selected":""}`,disabled:m.length>=5&&!I(e),children:e},e))})]})]})]})]})]})}),s.jsxs("div",{className:"settings-modal-footer",children:[s.jsx("button",{onClick:te,className:"save-button",children:"저장"}),s.jsx("button",{onClick:k,className:"cancel-button",children:"취소"})]})]})}):null};export{pe as default};
