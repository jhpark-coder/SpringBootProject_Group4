import{j as s}from"./index-b-_zDGuv.js";import{r as i}from"./tiptap-vendor-C2mi-KzI.js";import"./react-vendor-DeqkGhWy.js";import"./icons-vendor-8W8gD9qm.js";import"./utils-vendor-JBSp_YRO.js";const h={아트워크:["포토그래피","일러스트레이션","스케치","코믹스"],그래픽디자인:["타이포그라피","앨범아트","로고","브랜딩","편집디자인"],캐릭터:["카툰","팬아트","2D 캐릭터","3D 모델링"],Java:["Spring/JPA","네트워크","알고리즘","코어 자바"],프론트엔드:["HTML/CSS","JavaScript","React/Vue","UI/UX"],Python:["웹 개발","데이터 분석","머신러닝","자동화"]},ee={아트워크:["#감성적인","#풍경","#인물","#동물","#흑백","#빈티지","#판타지","#SF","#일상","#수채화","#유화","#디지털페인팅","#펜드로잉","#컨셉아트","#캐리커처","#웹툰","#만화","#스토리보드","#배경아트","#게임원화"],그래픽디자인:["#미니멀리즘","#모던","#레트로","#캘리그라피","#산세리프","#세리프","#커버디자인","#음악","#아이덴티티","#기업브랜딩","#패키지디자인","#포스터","#리플렛","#북커버","#인포그래픽","#UX/UI","#아이콘","#픽토그램","#광고디자인","#시각디자인"],캐릭터:["#귀여운","#실사체","#SD캐릭터","#애니메이션","#게임캐릭터","#웹툰캐릭터","#오리지널캐릭터","#몬스터","#메카닉","#이모티콘","#버츄얼유튜버","#ZBrush","#Blender","#Maya","#Live2D","#스파인","#시트지","#캐릭터시트","#일러스트","#컨셉디자인"],Java:["#백엔드","#웹개발","#SpringBoot","#SpringSecurity","#JPA","#Hibernate","#QueryDSL","#객체지향","#디자인패턴","#멀티스레딩","#소켓프로그래밍","#TCP/IP","#HTTP","#REST-API","#자료구조","#코딩테스트","#JVM","#GC","#이펙티브자바","#테스트코드"],프론트엔드:["#웹퍼블리싱","#반응형웹","#CSS-in-JS","#SASS","#TypeScript","#ES6+","#상태관리","#Redux","#MobX","#Vuex","#Next_js","#Nuxt_js","#Webpack","#Babel","#웹소켓","#PWA","#웹접근성","#웹표준","#프로토타이핑","#Figma"],Python:["#Django","#Flask","#FastAPI","#Pandas","#NumPy","#Matplotlib","#Scikit-learn","#TensorFlow","#PyTorch","#Jupyter","#크롤링","#웹스크레이핑","#Selenium","#BeautifulSoup","#업무자동화","#RPA","#데이터시각화","#딥러닝","#자연어처리","#컴퓨터비전"]},se=["1일","3일","7일"],le=({isOpen:b,onClose:D,onSave:U,initialSettings:n})=>{var M;const[c,g]=i.useState(n||{}),[l,P]=i.useState(""),[o,C]=i.useState(""),[j,N]=i.useState(""),[S,v]=i.useState(""),[y,f]=i.useState(""),[p,x]=i.useState(""),[B,F]=i.useState(""),[ae,_]=i.useState(""),[u,T]=i.useState([]),[k,E]=i.useState(""),[r,d]=i.useState({}),w=i.useRef(null);i.useEffect(()=>{var e;if(b&&n){g(n),P(n.primaryCategory||""),C(n.saleType||""),N(n.salePrice||""),v(n.auctionDuration||""),f(n.startBidPrice||""),x(n.buyNowPrice||""),F(n.workDescription||""),_(n.buyout_price||"");const a=((e=n.tags)==null?void 0:e.filter(t=>{var m;return!((m=h[n.primaryCategory])!=null&&m.includes(t))&&t!==n.primaryCategory}))||[];T(a)}},[b,n]),i.useEffect(()=>{const e=Object.keys(h).find(a=>c.tags.includes(a));e&&P(e)},[c.tags]),i.useEffect(()=>{console.log("SettingsModal 초기화 - settings:",c),c.saleType&&C(c.saleType),c.salePrice&&N(c.salePrice),c.auctionDuration&&v(c.auctionDuration),c.startBidPrice&&f(c.startBidPrice),c.buyNowPrice&&x(c.buyNowPrice)},[c]);const $=()=>{var t;const e={};(t=c.title)!=null&&t.trim()||(e.title="프로젝트 제목은 필수입니다."),l||(e.primaryCategory="1차 카테고리를 선택해주세요.");const a=c.tags.some(m=>{var J;return l&&((J=h[l])==null?void 0:J.includes(m))});return a||(e.secondaryCategory="세부 카테고리를 선택해주세요."),a&&!o&&(e.saleType="판매 방식을 선택해주세요."),o==="sale"&&(!j||parseFloat(j)<=0)&&(e.salePrice="희망판매가를 입력해주세요."),o==="auction"&&(S||(e.auctionDuration="경매 기간을 선택해주세요."),(!y||parseFloat(y)<=0)&&(e.startBidPrice="시작입찰가를 입력해주세요."),(!p||parseFloat(p)<=0)&&(e.buyNowPrice="즉시입찰가를 입력해주세요."),y&&p&&parseFloat(p)<=parseFloat(y)&&(e.buyNowPrice="즉시입찰가는 시작입찰가보다 높아야 합니다.")),d(e),Object.keys(e).length===0},O=e=>{g(a=>({...a,title:e.target.value})),r.title&&d(a=>({...a,title:""}))},W=e=>{const a=e.target.files[0];if(a){const t=new FileReader;t.onloadend=()=>{g(m=>({...m,coverImage:t.result}))},t.readAsDataURL(a)}},L=e=>{P(e),g(a=>({...a,tags:[e]})),r.primaryCategory&&d(a=>({...a,primaryCategory:""}))},G=e=>{const a=c.tags.find(t=>{var m;return l&&((m=h[l])==null?void 0:m.includes(t))});g(a===e?t=>({...t,tags:[l]}):t=>({...t,tags:[l,e]})),r.secondaryCategory&&d(t=>({...t,secondaryCategory:""}))},I=e=>{C(e),e==="sale"?(v(""),f(""),x("")):e==="auction"&&N(""),r.saleType&&d(a=>({...a,saleType:""}))},H=e=>{const a=e.target.value;N(a),r.salePrice&&d(t=>({...t,salePrice:""}))},V=e=>{v(e),r.auctionDuration&&d(a=>({...a,auctionDuration:""}))},X=e=>{const a=e.target.value;f(a),a&&p&&parseFloat(a)>parseFloat(p)&&x(""),r.startBidPrice&&d(t=>({...t,startBidPrice:""})),r.buyNowPrice&&d(t=>({...t,buyNowPrice:""}))},K=e=>{const a=e.target.value;x(a),r.buyNowPrice&&d(t=>({...t,buyNowPrice:""}))},Q=e=>{E(e.target.value)},Z=e=>{e.key==="Enter"&&k.trim()!==""&&(e.preventDefault(),A(k.trim()),E(""))},A=e=>{const a=e.startsWith("#")?e:`#${e}`;!u.includes(a)&&u.length<5&&T([...u,a])},q=e=>{T(u.filter(a=>a!==e))},z=e=>{F(e.target.value)},Y=()=>{if($()){const e=[...c.tags,...u],a={...c,tags:e,saleType:o,salePrice:o==="sale"?j:"",auctionDuration:o==="auction"?S:"",startBidPrice:o==="auction"?y:"",buyNowPrice:o==="auction"?p:"",workDescription:B};U(a)}},R=c.tags.some(e=>{var a;return l&&((a=h[l])==null?void 0:a.includes(e))});return b?s.jsx("div",{className:"modal-overlay",onClick:D,children:s.jsxs("div",{className:"settings-modal-content",onClick:e=>e.stopPropagation(),children:[s.jsx("div",{className:"settings-modal-header",children:s.jsx("h2",{children:"Settings"})}),s.jsx("div",{className:"modal-body",children:s.jsxs("div",{className:"settings-grid",children:[s.jsxs("div",{className:"left-column",children:[s.jsxs("div",{className:"form-group",children:[s.jsx("label",{children:"프로젝트 표지"}),s.jsxs("div",{className:"cover-image-container",children:[c.coverImage?s.jsxs("div",{className:"image-wrapper",onClick:()=>w.current.click(),children:[s.jsx("img",{src:c.coverImage,alt:"프로젝트 표지",className:"main-image"}),s.jsx("div",{className:"image-overlay",children:s.jsx("button",{className:"overlay-button",children:"이미지 변경"})})]}):s.jsxs("div",{className:"cover-image-placeholder",onClick:()=>w.current.click(),children:[s.jsx("span",{children:"+"}),s.jsx("p",{children:"클릭하여 표지 이미지 추가"})]}),s.jsx("input",{type:"file",ref:w,onChange:W,accept:"image/*",style:{display:"none"}})]})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{htmlFor:"work-description",children:"작품 설명"}),s.jsx("textarea",{id:"work-description",value:B,onChange:z,placeholder:"작품에 대한 추가적인 설명을 자유롭게 작성해주세요. (예: 제작 과정, 사용된 툴, 작품의 의미 등)",className:"work-description-textarea"})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{children:"선택된 태그"}),s.jsx("div",{className:"selected-tags",children:u.map(e=>s.jsxs("div",{className:"tag-item",children:[e,s.jsx("button",{onClick:()=>q(e),className:"remove-tag-btn",children:"×"})]},e))})]})]}),s.jsxs("div",{className:"right-column",children:[s.jsxs("div",{className:"form-group",children:[s.jsx("label",{htmlFor:"project-title",children:"프로젝트 제목 (필수)"}),s.jsx("input",{type:"text",id:"project-title",value:c.title,onChange:O,placeholder:"프로젝트의 제목을 입력하세요",className:r.title?"error":""}),r.title&&s.jsx("span",{className:"error-message",children:r.title})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{children:"1차 카테고리"}),s.jsx("div",{className:"category-group primary-categories",children:Object.keys(h).map(e=>s.jsx("button",{className:`category-button ${l===e?"active":""}`,onClick:()=>L(e),children:e},e))}),r.primaryCategory&&s.jsx("span",{className:"error-message",children:r.primaryCategory}),l&&s.jsxs("div",{className:"form-group",children:[s.jsx("label",{children:"세부 카테고리"}),s.jsx("div",{className:"category-group secondary-categories",children:h[l].map(e=>s.jsx("button",{className:`category-button ${c.tags.includes(e)?"active":""}`,onClick:()=>G(e),children:e},e))}),r.secondaryCategory&&s.jsx("span",{className:"error-message",children:r.secondaryCategory})]})]}),R&&s.jsxs("div",{className:"form-section",children:[s.jsx("h3",{className:"section-title",children:"판매 방식"}),s.jsxs("div",{className:"sale-type-group",children:[s.jsx("button",{className:`sale-type-button ${o==="sale"?"active":""}`,onClick:()=>I("sale"),children:"판매"}),s.jsx("button",{className:`sale-type-button ${o==="auction"?"active":""}`,onClick:()=>I("auction"),children:"경매"})]}),r.saleType&&s.jsx("span",{className:"error-message",children:r.saleType})]}),o==="sale"&&s.jsxs("div",{className:"price-input-section",children:[s.jsx("label",{htmlFor:"sale-price",children:"희망판매가 (원)"}),s.jsx("input",{type:"number",id:"sale-price",value:j,onChange:H,placeholder:"희망판매가를 입력하세요",min:"0",className:r.salePrice?"error":""}),r.salePrice&&s.jsx("span",{className:"error-message",children:r.salePrice})]}),o==="auction"&&s.jsxs("div",{className:"auction-settings",children:[s.jsxs("div",{className:"auction-duration-section",children:[s.jsx("label",{children:"경매 기간"}),s.jsx("div",{className:"duration-group",children:se.map(e=>s.jsx("button",{className:`duration-button ${S===e?"active":""}`,onClick:()=>V(e),children:e},e))}),r.auctionDuration&&s.jsx("span",{className:"error-message",children:r.auctionDuration})]}),s.jsxs("div",{className:"price-input-section",children:[s.jsx("label",{htmlFor:"start-bid-price",children:"시작입찰가 (원)"}),s.jsx("input",{type:"number",id:"start-bid-price",value:y,onChange:X,placeholder:"시작입찰가를 입력하세요",min:"0",className:r.startBidPrice?"error":""}),r.startBidPrice&&s.jsx("span",{className:"error-message",children:r.startBidPrice})]}),s.jsxs("div",{className:"price-input-section",children:[s.jsx("label",{htmlFor:"buy-now-price",children:"즉시입찰가 (원)"}),s.jsx("input",{type:"number",id:"buy-now-price",value:p,onChange:K,placeholder:"즉시입찰가는 시작입찰가보다 높아야 합니다.",min:"0",className:r.buyNowPrice?"error":""}),r.buyNowPrice&&s.jsx("span",{className:"error-message",children:r.buyNowPrice})]})]}),R&&s.jsxs("div",{className:"form-section",children:[s.jsx("h3",{className:"section-title",children:"태그"}),s.jsxs("div",{className:"tag-wrapper",children:[s.jsx("div",{className:"tag-input-container",children:s.jsx("input",{type:"text",value:k,onChange:Q,onKeyDown:Z,placeholder:"태그를 입력하고 Enter (최대 5개)",className:"tag-input",disabled:u.length>=5})}),s.jsxs("div",{className:"recommended-tags-container",children:[s.jsx("h4",{className:"recommended-tags-title",children:"추천 태그"}),s.jsx("div",{className:"recommended-tags",children:(M=ee[l])==null?void 0:M.map(e=>s.jsx("button",{onClick:()=>A(e),className:"recommended-tag-btn",disabled:u.length>=5||u.includes(e),children:e},e))})]})]})]})]})]})}),s.jsxs("div",{className:"settings-modal-footer",children:[s.jsx("button",{onClick:Y,className:"save-button",children:"저장"}),s.jsx("button",{onClick:D,className:"cancel-button",children:"취소"})]})]})}):null};export{le as default};
