import{j as e}from"./index-mG-2HMtM.js";import{r as n,g as N}from"./tiptap-vendor-C2mi-KzI.js";import"./react-vendor-DeqkGhWy.js";import"./icons-vendor-8W8gD9qm.js";import"./utils-vendor-JBSp_YRO.js";const P=({onGridCreate:h,onClose:r})=>{const[l,f]=n.useState([]),[d,g]=n.useState("2-cols"),[m,i]=n.useState(!1),[b,c]=n.useState(""),x=N.useRef(null),j=async a=>{const s=Array.from(a.target.files);if(s.length===0)return;i(!0),c("");const u=[];for(const t of s){const p=new FormData;p.append("file",t);try{const o=await fetch("/editor/api/upload",{method:"POST",body:p});if(!o.ok)throw new Error(`Server responded with ${o.status}`);const v=`http://localhost:8080${await o.text()}`;u.push({src:v,alt:t.name})}catch(o){console.error("Error uploading file:",o),c(`Failed to upload ${t.name}. Please try again.`),i(!1);return}}f(t=>[...t,...u]),i(!1)},y=()=>{if(l.length===0){c("Please upload at least one image.");return}const a={layout:`grid-${d}`,items:l.map(s=>({src:s.src,alt:s.alt}))};h(a),r()};return e.jsx("div",{className:"modal-overlay fancy-modal-overlay",onClick:r,children:e.jsxs("div",{className:"modal-content fancy-modal-content animate-fadeIn",onClick:a=>a.stopPropagation(),children:[e.jsx("h2",{className:"fancy-modal-title",children:"포토 그리드 생성"}),e.jsxs("div",{className:"modal-section",children:[e.jsx("label",{className:"fancy-label",children:"이미지 업로드 (여러장 선택 가능)"}),e.jsxs("div",{className:"fancy-file-upload-group",children:[e.jsx("input",{type:"file",multiple:!0,accept:"image/*",onChange:j,className:"hidden",id:"photo-grid-file-upload",ref:x}),e.jsx("label",{htmlFor:"photo-grid-file-upload",className:"fancy-embed-btn fancy-file-btn",children:"파일 선택"}),l.length>0&&e.jsxs("span",{className:"fancy-file-name",children:[l.length,"개의 이미지 선택됨"]})]})]}),e.jsx("div",{className:"image-preview",children:l.map((a,s)=>e.jsx("div",{className:"preview-item",children:e.jsx("img",{src:a.src,alt:a.alt})},s))}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Layout"}),e.jsxs("select",{value:d,onChange:a=>g(a.target.value),children:[e.jsx("option",{value:"2-cols",children:"2 Columns"}),e.jsx("option",{value:"3-cols",children:"3 Columns"}),e.jsx("option",{value:"4-cols",children:"4 Columns"}),e.jsx("option",{value:"1-2-cols",children:"1-2 Columns"}),e.jsx("option",{value:"2-1-cols",children:"2-1 Columns"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx("button",{onClick:r,className:"fancy-close-btn",children:"취소"}),e.jsx("button",{onClick:y,className:"fancy-embed-btn",disabled:m||l.length===0,children:m?"업로드 중...":`그리드 생성 (${l.length})`})]})]})})};export{P as default};
