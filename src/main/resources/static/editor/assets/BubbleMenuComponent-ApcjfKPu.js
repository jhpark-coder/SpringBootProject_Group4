import{j as s}from"./index-BjV5grVz.js";import{r as f,B as g}from"./tiptap-vendor-C2mi-KzI.js";import{B as b,j as v,U as k,k as j,L as d,A,a as N,b as z}from"./icons-vendor-8W8gD9qm.js";import"./react-vendor-DeqkGhWy.js";import"./utils-vendor-JBSp_YRO.js";const L=({editor:e})=>{const o=()=>{if(!e)return"";const{selection:t}=e.state,{from:n,to:i,empty:x}=t;if(x)return"";let r="";return e.state.doc.nodesBetween(n,i,c=>{if(c.marks&&c.marks.length>0){const a=c.marks.find(l=>l.type.name==="textStyle");if(a&&a.attrs&&a.attrs.fontSize)return r=a.attrs.fontSize.replace("px",""),!1}}),r},h=f.useCallback(()=>{if(!e)return;const t=e.getAttributes("link").href,n=window.prompt("URL",t);if(n!==null){if(n===""){e.chain().focus().extendMarkRange("link").unsetLink().run();return}e.chain().focus().extendMarkRange("link").setLink({href:n}).run()}},[e]);return f.useCallback(t=>{const n=t.target.value;t.stopPropagation(),n&&!isNaN(parseInt(n))?e.chain().setMark("textStyle",{fontSize:`${n}px`}).run():n===""&&e.chain().unsetMark("textStyle").run()},[e]),e?s.jsxs(g,{editor:e,tippyOptions:{duration:100},className:"bubble-menu",shouldShow:({editor:t,view:n,state:i,oldState:x,from:r,to:c})=>{const a=["image","video","iframe","audio","photoGrid"],{selection:l}=i,{$from:m,$to:p}=l;return a.some(u=>t.isActive(u)||l.node&&l.node.type.name===u||m.parent.type.name===u&&m.pos===p.pos)?!1:r!==c},children:[s.jsxs("div",{className:"bubble-menu-group",children:[s.jsxs("button",{onClick:()=>e.chain().focus().toggleBold().run(),className:e.isActive("bold")?"is-active":"",children:[" ",s.jsx(b,{size:16})," "]}),s.jsxs("button",{onClick:()=>e.chain().focus().toggleItalic().run(),className:e.isActive("italic")?"is-active":"",children:[" ",s.jsx(v,{size:16})," "]}),s.jsxs("button",{onClick:()=>e.chain().focus().toggleUnderline().run(),className:e.isActive("underline")?"is-active":"",children:[" ",s.jsx(k,{size:16})," "]}),s.jsxs("button",{onClick:()=>e.chain().focus().toggleStrike().run(),className:e.isActive("strike")?"is-active":"",children:[" ",s.jsx(j,{size:16})," "]}),s.jsxs("button",{onClick:h,className:e.isActive("link")?"is-active":"",children:[" ",s.jsx(d,{size:16})," "]})]}),s.jsx("div",{className:"divider"}),s.jsxs("div",{className:"bubble-menu-group",children:[s.jsx("button",{onMouseDown:t=>{t.preventDefault();const n=parseInt(o()||"16"),i=Math.max(8,n-1);e.chain().focus().setFontSize(`${i}px`).run()},children:"-"}),s.jsx("span",{style:{color:"white",padding:"0 8px",minWidth:"30px",textAlign:"center"},children:o()||"16"}),s.jsx("button",{onMouseDown:t=>{t.preventDefault();const n=parseInt(o()||"16"),i=Math.min(120,n+1);e.chain().focus().setFontSize(`${i}px`).run()},children:"+"})]}),s.jsx("div",{className:"divider"}),s.jsxs("div",{className:"bubble-menu-group",children:[s.jsxs("button",{onClick:()=>e.chain().focus().setTextAlign("left").run(),className:e.isActive({textAlign:"left"})?"is-active":"",children:[" ",s.jsx(A,{size:16})," "]}),s.jsxs("button",{onClick:()=>e.chain().focus().setTextAlign("center").run(),className:e.isActive({textAlign:"center"})?"is-active":"",children:[" ",s.jsx(N,{size:16})," "]}),s.jsxs("button",{onClick:()=>e.chain().focus().setTextAlign("right").run(),className:e.isActive({textAlign:"right"})?"is-active":"",children:[" ",s.jsx(z,{size:16})," "]})]})]}):null};export{L as default};
