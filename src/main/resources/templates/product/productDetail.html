<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
    layout:decorate="~{fragment/layout}">

<th:block layout:fragment="css">
    <style>
        /* 기본 스타일 */
        .product-detail-page * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        .product-detail-page a {
            text-decoration: none;
            color: inherit;
        }

        .product-detail-page button {
            cursor: pointer;
            border: none;
            font-family: inherit;
        }

        /* --- 메인 컨텐츠 --- */
        .main-content {
            display: flex;
            justify-content: center;
            gap: 40px;
            max-width: 1200px;
            margin: 40px auto;
            padding: 0 20px;
        }

        .artwork-section {
            flex: 2;
            display: flex;
            flex-direction: column;
            gap: 24px;
            max-width: 700px;
        }

        .artwork-section h1 {
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 0;
        }

        .artwork-image {
            width: 100%;
            aspect-ratio: 4/3;
            background: #d9d9d9;
            border-radius: 8px;
            object-fit: cover;
            display: block;
        }

        .description-section {
            border-top: 1px solid #eee;
            padding-top: 20px;
        }

        /* --- 사이드바 --- */
        .sidebar {
            flex: 1;
            border: 1px solid #e0e0e0;
            border-radius: 12px;
            padding: 22px 20px;
            height: fit-content;
            display: flex;
            flex-direction: column;
            gap: 18px;
            background: #fff;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);
            min-width: 270px;
            max-width: 320px;
        }

        .sidebar .author-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .sidebar .author-profile {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .sidebar .author-pfp {
            width: 40px;
            height: 40px;
            background: #e0e0e0;
            border-radius: 50%;
        }

        .sidebar .author-name {
            font-weight: bold;
            font-size: 15px;
        }

        .sidebar .subscribe-btn {
            background: #007bff;
            color: #fff;
            padding: 7px 16px;
            border-radius: 5px;
            font-size: 14px;
            font-weight: 500;
        }

        .sidebar .tags {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }

        .sidebar .tag-btn {
            background: #f0f0f0;
            border: 1px solid #ddd;
            border-radius: 15px;
            padding: 5px 12px;
            font-size: 12px;
            color: #555;
        }

        .sidebar .description {
            font-size: 14px;
            color: #555;
            line-height: 1.6;
            border-top: 1px solid #eee;
            padding-top: 15px;
        }

        .sidebar-actions {
            display: flex;
            gap: 10px;
            align-items: center;
        }

        .like-btn {
            display: flex;
            align-items: center;
            gap: 5px;
            background: #f0f0f0;
            padding: 8px 12px;
            border-radius: 8px;
        }

        .like-btn.liked {
            background: #ffc107;
            color: #333;
        }

        .continue-btn {
            background: #007bff;
            color: #fff;
            flex-grow: 1;
            padding: 12px 0;
            font-size: 16px;
            font-weight: bold;
            border-radius: 8px;
        }

        .no-js-message {
            text-align: center;
            padding: 100px 20px;
            color: #ff0000;
            font-size: 18px;
            background-color: #fff5f5;
            border: 2px solid #ffcccc;
            border-radius: 10px;
            margin: 50px auto;
            max-width: 600px;
        }
    </style>
</th:block>

<div layout:fragment="content" class="product-detail-page">

    <!-- 1. JS 비활성화 시 보이는 경고 메시지 (기본) -->
    <div id="no-js-warning" class="no-js-message">
        <h1>⚠️ JavaScript 활성화 필요</h1>
        <p><strong>보안상의 이유로 JavaScript가 필요합니다.</strong></p>
        <p>브라우저 설정에서 JavaScript를 활성화한 후 새로고침해주세요.</p>
    </div>

    <!-- 2. JS가 동적으로 콘텐츠를 채워넣을 자리 (placeholder) -->
    <div id="product-detail-placeholder">
        <!-- JS가 여기에 상세 페이지 콘텐츠를 생성하여 삽입할 예정 -->
    </div>
</div>

<th:block layout:fragment="script">
    <!-- 보안 스크립트를 가장 먼저 로드합니다. -->
    <script th:src="@{/js/security.js}"></script>

    <!-- 이 페이지 전용 스크립트 -->
    <script th:src="@{/js/productDetail.js}"></script>
</th:block>

</html>